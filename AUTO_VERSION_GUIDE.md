# è‡ªåŠ¨ç‰ˆæœ¬åŒæ­¥ä½¿ç”¨ç¤ºä¾‹

åŸºäº Apple Kit é¡¹ç›®çš„ Git tags è‡ªåŠ¨ç®¡ç†ç‰ˆæœ¬å‘å¸ƒã€‚

## æŸ¥çœ‹ç‰ˆæœ¬ä¿¡æ¯

```bash
# æŸ¥çœ‹ Apple Kit å’Œå½“å‰ä»“åº“çš„ç‰ˆæœ¬ä¿¡æ¯
./manage_release.sh version
```

è¾“å‡ºç¤ºä¾‹ï¼š
```
æ­£åœ¨è·å–ç‰ˆæœ¬ä¿¡æ¯...
Apple Kit æœ€æ–°ç‰ˆæœ¬: 1.0.1
å½“å‰ä»“åº“æœ€æ–° tag: 1.0.0

[INFO] å½“å‰ç‰ˆæœ¬: 1.0.1
[INFO] å»ºè®®çš„ç‰ˆæœ¬å·:
  è¡¥ä¸ç‰ˆæœ¬ (patch): 1.0.2
  æ¬¡è¦ç‰ˆæœ¬ (minor): 1.1.0
  ä¸»è¦ç‰ˆæœ¬ (major): 2.0.0
```

## è‡ªåŠ¨å‘å¸ƒ

```bash
# è‡ªåŠ¨ä½¿ç”¨ Apple Kit çš„ç‰ˆæœ¬å·è¿›è¡Œå‘å¸ƒ
./manage_release.sh auto-release
```

è¯¥å‘½ä»¤ä¼šï¼š
1. è·å– Apple Kit é¡¹ç›®çš„æœ€æ–° Git tag
2. æ£€æŸ¥æœ¬ä»“åº“æ˜¯å¦å·²æœ‰ç›¸åŒç‰ˆæœ¬çš„ tag
3. å¦‚æœç‰ˆæœ¬å†²çªï¼Œæä¾›é€‰é¡¹ä½¿ç”¨å»ºè®®çš„ç‰ˆæœ¬å·
4. è‡ªåŠ¨æ‰§è¡Œå®Œæ•´çš„å‘å¸ƒæµç¨‹

## çŠ¶æ€ç›‘æ§

```bash
# æŸ¥çœ‹ç‰ˆæœ¬åŒæ­¥çŠ¶æ€
./manage_release.sh status
```

çŠ¶æ€æ˜¾ç¤ºä¼šåŒ…å«ï¼š
- ğŸ“¦ å½“å‰ Package.swift æ¨¡å¼
- ğŸ”¨ æ„å»ºæ–‡ä»¶çŠ¶æ€
- ğŸ Apple Kit ç‰ˆæœ¬ä¿¡æ¯
- âš ï¸ ç‰ˆæœ¬ä¸åŒæ­¥è­¦å‘Šï¼ˆå¦‚é€‚ç”¨ï¼‰

## å·¥ä½œæµç¨‹ç¤ºä¾‹

### å…¸å‹çš„å¼€å‘åˆ°å‘å¸ƒæµç¨‹

```bash
# 1. åˆ‡æ¢åˆ°æœ¬åœ°å¼€å‘æ¨¡å¼
./manage_release.sh local

# 2. è¿›è¡Œå¼€å‘å’Œæµ‹è¯•...

# 3. æŸ¥çœ‹ç‰ˆæœ¬çŠ¶æ€
./manage_release.sh status

# 4. è‡ªåŠ¨å‘å¸ƒï¼ˆæ¨èï¼‰
./manage_release.sh auto-release
```

### æ‰‹åŠ¨ç‰ˆæœ¬æ§åˆ¶

```bash
# æŸ¥çœ‹ç‰ˆæœ¬ä¿¡æ¯å’Œå»ºè®®
./manage_release.sh version

# æ‰‹åŠ¨æŒ‡å®šç‰ˆæœ¬å‘å¸ƒ
./manage_release.sh release 1.1.0
```

## Makefile å¿«æ·å‘½ä»¤

```bash
# æŸ¥çœ‹ç‰ˆæœ¬ä¿¡æ¯
make version

# è‡ªåŠ¨å‘å¸ƒ
make auto-release

# æŸ¥çœ‹çŠ¶æ€
make status
```

## ç‰ˆæœ¬ç­–ç•¥

### è‡ªåŠ¨ç‰ˆæœ¬åŒæ­¥
- é»˜è®¤ä½¿ç”¨ Apple Kit é¡¹ç›®çš„æœ€æ–° Git tag
- å¦‚æœç‰ˆæœ¬å·²å­˜åœ¨ï¼Œè‡ªåŠ¨å»ºè®®è¡¥ä¸ç‰ˆæœ¬ (+0.0.1)

### ç‰ˆæœ¬å·æ ¼å¼
- æ”¯æŒ `1.0.0` æ ¼å¼
- æ”¯æŒ `v1.0.0` æ ¼å¼ï¼ˆä¼šè‡ªåŠ¨ç§»é™¤ 'v' å‰ç¼€ï¼‰
- å¿…é¡»ç¬¦åˆè¯­ä¹‰åŒ–ç‰ˆæœ¬è§„èŒƒ

### å†²çªå¤„ç†
```bash
Apple Kit ç‰ˆæœ¬: 1.0.1
æœ¬ä»“åº“å·²æœ‰: 1.0.1

å»ºè®®ç‰ˆæœ¬:
  è¡¥ä¸ç‰ˆæœ¬: 1.0.2
  æ¬¡è¦ç‰ˆæœ¬: 1.1.0
  ä¸»è¦ç‰ˆæœ¬: 2.0.0
```

## é…ç½®

Apple Kit é¡¹ç›®è·¯å¾„åœ¨ `manage_release.sh` ä¸­é…ç½®ï¼š
```bash
APPLE_KIT_PATH="../apple/clever-vpn-apple-kit"
```

ç¡®ä¿ï¼š
1. è·¯å¾„æ­£ç¡®æŒ‡å‘ Apple Kit é¡¹ç›®
2. Apple Kit é¡¹ç›®æ˜¯æœ‰æ•ˆçš„ Git ä»“åº“
3. Apple Kit é¡¹ç›®æœ‰ç¬¦åˆæ ¼å¼çš„ç‰ˆæœ¬ tags

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

**1. "Apple Kit é¡¹ç›®è·¯å¾„ä¸å­˜åœ¨"**
- æ£€æŸ¥ `APPLE_KIT_PATH` é…ç½®
- ç¡®ä¿ç›¸å¯¹è·¯å¾„æ­£ç¡®

**2. "Apple Kit é¡¹ç›®ä¸æ˜¯ Git ä»“åº“"**  
- ç¡®ä¿ Apple Kit é¡¹ç›®å·²åˆå§‹åŒ–ä¸º Git ä»“åº“
- æ£€æŸ¥ `.git` ç›®å½•æ˜¯å¦å­˜åœ¨

**3. "æœªæ‰¾åˆ°æœ‰æ•ˆçš„ç‰ˆæœ¬ tag"**
- åœ¨ Apple Kit é¡¹ç›®ä¸­åˆ›å»ºç‰ˆæœ¬ tagï¼š
  ```bash
  cd ../apple/clever-vpn-apple-kit
  git tag 1.0.0
  git push origin 1.0.0
  ```

**4. "ç‰ˆæœ¬æ ¼å¼ä¸æ­£ç¡®"**
- ç¡®ä¿ tag æ ¼å¼ä¸º `x.y.z` æˆ– `vx.y.z`
- ä½¿ç”¨è¯­ä¹‰åŒ–ç‰ˆæœ¬å·

### è°ƒè¯•å‘½ä»¤

```bash
# æ£€æŸ¥ Apple Kit é¡¹ç›®çš„ tags
cd ../apple/clever-vpn-apple-kit && git tag -l

# æ‰‹åŠ¨æµ‹è¯•ç‰ˆæœ¬è·å–
cd ../apple/clever-vpn-apple-kit && git tag -l | grep -E '^v?[0-9]+\.[0-9]+\.[0-9]+' | sort -V | tail -1
```
